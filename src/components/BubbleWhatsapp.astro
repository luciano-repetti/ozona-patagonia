<div class="bubble-whatsapp">
  <a
    href="https://api.whatsapp.com/send?phone=+5492944712211&text=Hola%20que%20tal,%20necesito%20información%20en:"
    aria-label="Ir al numero de whatsapp"
    class="link-whatsapp"
    target="_blank"
  >
    <i class="icon-whatsapp"></i>
  </a>
</div>

<style>
  .bubble-whatsapp {
    position: fixed;
    bottom: 50px;
    right: 50px;
    width: 70px;
    height: 70px;
    padding: 0.5em;
    border-radius: 50%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    box-shadow: rgba(0, 0, 0, 0.15) 0px 2px 8px;
    transition: scale 0.3s ease, opacity 0.5s ease, transform 0.5s ease;
    opacity: 0;
    transform: scale(0.5) translateY(20px);
    z-index: 1000;
  }

  .bubble-whatsapp.show {
    opacity: 1;
    transform: scale(1) translateY(0);
  }

  .bubble-whatsapp:hover {
    scale: 1.1;
  }

  .link-whatsapp {
    text-decoration: none;
    color: #25d366;
  }

  .icon-whatsapp {
    font-size: 2em;
  }

  @media (max-width: 790px) {
    .bubble-whatsapp {
      bottom: 40px;
      right: 10px;
      width: 50px;
      height: 50px;
      padding: 0.2em;
    }

    .icon-whatsapp {
      font-size: 1.5em;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const bubbleWhatsapp = document.querySelector('.bubble-whatsapp') as HTMLElement | null;
    const heroBgContainer = document.querySelector('.hero-bg-container') as HTMLElement | null;

    if (!bubbleWhatsapp) return;

    // Función para mostrar el botón de WhatsApp
    const showWhatsappButton = () => {
      bubbleWhatsapp.classList.add('show');
    };

    // Si existe el hero, esperar a que cargue y luego mostrar después de las animaciones
    if (heroBgContainer) {
      const checkHeroLoaded = () => {
        if (heroBgContainer.classList.contains('loaded')) {
          // El hero termina sus animaciones a los ~3.8s, esperamos 4s para mostrar WhatsApp
          setTimeout(showWhatsappButton, 4000);
        } else {
          // Revisar cada 100ms si el hero ya cargó
          setTimeout(checkHeroLoaded, 100);
        }
      };
      checkHeroLoaded();
    } else {
      // Si no hay hero, mostrar inmediatamente
      showWhatsappButton();
    }
  });
</script>
